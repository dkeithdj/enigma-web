---
import { PortableText } from "astro-portabletext";
import { mergeComponents } from "astro-portabletext/utils";
import Block from "./Block.astro";
import List from "./List.astro";
import ListItem from "./ListItem.astro";
import Mark from "./Mark.astro";
import Image from "./Image.astro";

type PortableTextProps = Parameters<typeof PortableText>[0];

export interface Props {
  value: PortableTextProps["value"];
  components?: PortableTextProps["components"];
}

const defaultComponents = {
  block: Block,
  list: List,
  listItem: ListItem,
  mark: Mark,
};

const {
  value,
  components = { type: { image: Image } },
  ...attrs
} = Astro.props;

const portableTextProps = {
  value: value,
  components: mergeComponents(defaultComponents, components),
};
---

<PortableText {...portableTextProps} {...attrs} />
